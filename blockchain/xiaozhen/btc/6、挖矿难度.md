**全文总结**
本文围绕比特币系统中挖矿难度调整展开，先介绍挖矿概念，即通过尝试block header里的随机值，使整个block head的哈希值小于等于给定目标阈值，挖矿难度与目标阈值成反比。接着阐述调整挖矿难度的原因，由于系统总算力不断增强，若不调整，出块时间会越来越短，导致区块链分叉增多，危害系统安全与共识达成。同时指出比特币协议虽设计出块间隔为十分钟，但并非绝对最优，以太坊就将出块时间降至15秒，并设计新协议。

随后讲解比特币调整挖矿难度的具体方式，每2016个区块（约每两个星期）重新调整目标阈值，根据实际出块时间与预期时间的关系进行调整，且上调和下调都有四倍限制，以避免意外情况。代码开源，到规定区块数自动调整，恶意节点不调整会导致其发布的区块不被认可。还提到以太坊是每个新出区块都可能调整挖矿难度，方法更复杂。

最后通过图表展示比特币系统中总算力、挖矿难度、每天出块时间的变化情况，表明调整难度达到预期目的，同时提醒注意不同公式计算的是挖矿难度还是目标阈值。

**重要亮点**
- **挖矿难度与目标阈值关系**：比特币挖矿需让block head哈希值小于等于目标阈值，目标阈值越小，挖矿难度越大。挖矿难度与目标阈值成反比，难度为1时，对应的目标阈值是个极大数。例如，当目标阈值很大时，满足哈希值要求的可能性大，挖矿相对容易。
- **调整挖矿难度的必要性**：若不调整挖矿难度，随着系统总算力增强，出块时间会不断缩短。出块时间过短，会使区块在网络传播时易出现分叉，影响系统共识与安全。如两个节点同时挖到矿并发布区块，就会产生分叉，若出块时间持续缩短，分叉将成常态，恶意节点还可能利用算力分散发动攻击。
- **比特币调整挖矿难度的机制**：比特币每2016个区块（约14天）调整一次目标阈值。依据实际产生2016个区块花费时间与预期时间（2016×10分钟）对比来调整。实际时间超预期，说明出块慢，降低难度，增大目标阈值；实际时间短于预期，说明出块快，提高难度，减小目标阈值。且上调和下调都限制在四倍以内。
- **比特币与以太坊的比较**：比特币出块时间设计为十分钟，以太坊降至15秒，出块速度大幅提升。以太坊为应对高速度带来的问题，设计了ghost协议，对分叉产生的orphan block给予奖励。两者都需调整挖矿难度以保持出块时间稳定，但以太坊调整更频繁，每个新出区块都可能调整，方法也更复杂。 