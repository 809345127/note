# 代码评审清单

## P0（必须阻断）

1. 分层违规（`domain` 依赖基础设施或框架）。
2. 事务编排并发不安全。
3. 外部输入缺少校验。
4. 错误模型不一致，破坏 API 契约。

## P1（建议阻断）

1. 控制器或应用层绕过仓储直接访问数据库。
2. 聚合并发更新缺少乐观锁处理。
3. 启动阶段未校验关键表结构契约。
4. outbox 事件无 worker 部署/运行路径。

## P2（尽快修复）

1. 日志缺少请求 ID 或核心维度（service/env）。
2. 重复的映射代码未抽取公共方法。
3. 缺少领域不变量的单元测试。

## 本地评审命令

```bash
./scripts/check.sh
```
